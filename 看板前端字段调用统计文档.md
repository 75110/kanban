# 看板前端字段调用统计文档

## 数据库表结构概览

### 主要数据表
1. employee_roster - 员工花名册表
2. resignation_monitoring - 离职监控表  
3. personnel_changes - 人员异动明细表

---

## 1. 仪表板主页 (Dashboard.vue)

### 1.1 统计卡片功能

#### 在职人数统计
- 数据源表: `employee_roster`
- 调用字段:
  - `region` - 区域筛选条件
  - `department` - 部门筛选条件
  - `work_age_months` - 工龄筛选条件
  - `education` - 学历筛选条件
  - `entry_date` - 入职时间筛选条件
- SQL查询: `SELECT COUNT(*) as count FROM employee_roster WHERE [筛选条件]`

#### 入职人数统计
- 数据源表: `employee_roster`
- 调用字段:
  - `entry_date` - 按年/月统计新入职员工
  - 同上述筛选字段
- SQL查询: `SELECT COUNT(*) as count FROM employee_roster WHERE YEAR(entry_date) = ? AND MONTH(entry_date) = ?`

#### 离职人数统计
- 数据源表: `resignation_monitoring`
- 调用字段:
  - `resignation_date` - 离职时间（主要统计字段）
  - `region` - 区域筛选条件
  - `department` - 部门筛选条件
  - `work_age_months` - 工龄筛选条件
  - `education` - 学历筛选条件
- SQL查询: `SELECT COUNT(*) as count FROM resignation_monitoring WHERE [筛选条件]`

#### 异动人数统计
- 数据源表: `personnel_changes`
- 调用字段:
  - `department` - 部门筛选条件
- SQL查询: `SELECT COUNT(*) as count FROM personnel_changes WHERE department = ?`

### 1.2 图表组件功能

#### 司龄分布图表
- 数据源表: `employee_roster`
- 主要字段: `work_age_months` - 工龄月数
- 筛选字段: `region`, `department`, `education`, `entry_date`
- SQL查询: `SELECT work_age_months FROM employee_roster WHERE [筛选条件]`
- 数据转换: 将月数转换为年龄段（1年以下、1-2年、2-3年...10年以上）

#### 学历分布图表
- 数据源表: `employee_roster`
- 主要字段: `education` - 学历
- 筛选字段: `region`, `department`, `work_age_months`, `entry_date`
- SQL查询: `SELECT education FROM employee_roster WHERE [筛选条件]`
- 数据转换: 将学历转换为分组（高中及以下、大专、本科、硕士及以上、其他）

#### 部门统计图表
- 数据源表: `employee_roster`
- 主要字段: `department` - 部门
- 筛选字段: `region`, `work_age_months`, `education`, `entry_date`
- SQL查询: `SELECT department, COUNT(*) as count FROM employee_roster WHERE [筛选条件] GROUP BY department ORDER BY count DESC`

### 1.3 筛选器功能

#### 筛选选项数据源
- 区域选项: `SELECT DISTINCT region FROM employee_roster WHERE region IS NOT NULL ORDER BY region`
- 部门选项: `SELECT DISTINCT department FROM employee_roster WHERE department IS NOT NULL ORDER BY department`
- 年份选项: `SELECT DISTINCT YEAR(entry_date) as year FROM employee_roster WHERE entry_date IS NOT NULL ORDER BY year DESC`

---

## 2. 员工花名册页面 (EmployeeRoster.vue)

### 2.1 数据表格显示字段

数据源表: `employee_roster`

| 显示列名 | 数据库字段 | 字段说明 | 数据类型 |
|---------|-----------|---------|---------|
| 序列 | `sequence_number` | 员工序列号 | VARCHAR(50) |
| 姓名 | `name` | 员工姓名 | VARCHAR(50) |
| 部门 | `department` | 所属部门 | VARCHAR(100) |
| 岗位 | `position` | 工作岗位 | VARCHAR(100) |
| 性别 | `gender` | 性别 | ENUM('男', '女') |
| 年龄 | `age` | 年龄 | INT |
| 学历 | `education_group` | 学历分组（转换后） | 转换字段 |
| 工龄 | `work_age_group` | 工龄分组（转换后） | 转换字段 |
| 入职时间 | `entry_date` | 入职日期 | DATE |
| 组织区域 | `organization_region` | 组织区域 | VARCHAR(50) |
| 区域 | `region` | 区域 | VARCHAR(50) |
| 员工性质 | `employee_type` | 员工类型 | VARCHAR(50) |
| 婚姻状况 | `marital_status` | 婚姻状态 | VARCHAR(20) |
| 联系方式 | `personal_contact` | 个人联系方式 | VARCHAR(50) |

### 2.2 搜索筛选功能

| 搜索项 | 数据库字段 | 查询方式 | SQL示例 |
|-------|-----------|---------|---------|
| 员工姓名 | `name` | 模糊搜索 | `name LIKE '%关键词%'` |
| 部门 | `department` | 精确匹配 | `department = '具体部门'` |
| 岗位 | `position` | 模糊搜索 | `position LIKE '%关键词%'` |


## 3. 离职监控页面 (ResignationMonitoring.vue)

### 3.1 数据表格显示字段

数据源表: `resignation_monitoring`

| 显示列名 | 数据库字段 | 字段说明 | 数据类型 |
|---------|-----------|---------|---------|
| 序列 | `sequence_number` | 员工序列号 | VARCHAR(50) |
| 姓名 | `name` | 员工姓名 | VARCHAR(50) |
| 部门 | `department` | 所属部门 | VARCHAR(100) |
| 岗位 | `position` | 工作岗位 | VARCHAR(100) |
| 性别 | `gender` | 性别 | ENUM('男', '女') |
| 年龄 | `age` | 年龄 | INT |
| 学历 | `education_group` | 学历分组（转换后） | 转换字段 |
| 工龄 | `work_age_group` | 工龄分组（转换后） | 转换字段 |
| 入职时间 | `entry_date` | 入职日期 | DATE |
| 离职时间 | `resignation_date` | 离职日期 | DATE |
| 离职类型 | `resignation_type` | 离职类型 | VARCHAR(50) |
| 离职原因 | `resignation_reason` | 离职原因 | TEXT |
| 组织区域 | `organization_region` | 组织区域 | VARCHAR(50) |
| 区域 | `region` | 区域 | VARCHAR(50) |

### 3.2 搜索筛选功能

| 搜索项 | 数据库字段 | 查询方式 |
|-------|-----------|---------|
| 员工姓名 | `name` | 模糊搜索 |
| 部门 | `department` | 精确匹配 |
| 离职类型 | `resignation_type` | 精确匹配 |

---

## 4. 人员异动页面 (PersonnelChanges.vue)

### 4.1 数据表格显示字段

数据源表: `personnel_changes`

| 显示列名 | 数据库字段 | 字段说明 | 数据类型 |
|---------|-----------|---------|---------|
| 部门 | `department` | 所属部门 | VARCHAR(100) |
| 姓名 | `name` | 员工姓名 | VARCHAR(50) |
| 原岗位 | `original_position` | 异动前岗位 | VARCHAR(100) |
| 新岗位 | `new_position` | 异动后岗位 | VARCHAR(100) |
| 异动时间 | `transfer_date` | 异动日期 | DATE |
| 异动原因 | `change_reason` | 异动原因 | VARCHAR(100) |
| 备注 | `remarks` | 备注信息 | TEXT |

### 4.2 搜索筛选功能

| 搜索项 | 数据库字段 | 查询方式 |
|-------|-----------|---------|
| 员工姓名 | `name` | 模糊搜索 |
| 部门 | `department` | 精确匹配 |
| 异动类型 | `change_reason` | 模糊搜索 |

---

## 5. 数据转换规则

### 5.1 工龄分组转换 (transformWorkAge)
- 输入: `work_age_months` (工龄月数)
- 输出: 工龄分组字符串

| 月数范围 | 显示分组 |
|---------|---------|
| 0-11 | 1年以下 |
| 12-23 | 1-2年 |
| 24-35 | 2-3年 |
| 36-47 | 3-4年 |
| 48-59 | 4-5年 |
| 60-71 | 5-6年 |
| 72-83 | 6-7年 |
| 84-95 | 7-8年 |
| 96-107 | 8-9年 |
| 108-119 | 9-10年 |
| 120+ | 10年以上 |

### 5.2 学历分组转换 (transformEducation)
- 输入: `education` (学历字段)
- 输出: 学历分组字符串

| 原始学历 | 显示分组 |
|---------|---------|
| 高中、中专、技校等 | 高中及以下 |
| 大专、专科 | 大专 |
| 本科、学士 | 本科 |
| 硕士、博士、研究生 | 硕士及以上 |
| 其他情况 | 其他 |

---

## 6. API接口调用统计

### 6.1 仪表板相关API

| API路径 | 调用表 | 主要字段 | 功能说明 |
|---------|-------|---------|---------|
| `/api/dashboard/stats` | employee_roster, resignation_monitoring, personnel_changes | region, department, work_age_months, education, entry_date, resignation_date | 获取统计数据 |
| `/api/dashboard/work-age-distribution` | employee_roster | work_age_months + 筛选字段 | 获取工龄分布 |
| `/api/dashboard/education-distribution` | employee_roster | education + 筛选字段 | 获取学历分布 |
| `/api/dashboard/department-stats` | employee_roster | department + 筛选字段 | 获取部门统计 |
| `/api/dashboard/filter-options` | employee_roster | region, department, entry_date | 获取筛选选项 |

### 6.2 数据列表相关API

| API路径 | 调用表 | 主要字段 | 功能说明 |
|---------|-------|---------|---------|
| `/api/employee/roster` | employee_roster | 所有字段 | 获取员工花名册 |
| `/api/employee/resignation` | resignation_monitoring | 所有字段 | 获取离职监控数据 |
| `/api/employee/changes` | personnel_changes | 所有字段 | 获取人员异动数据 |

---

## 7. 字段使用频率统计

### 7.1 高频使用字段 (在多个功能中使用)

| 字段名 | 使用次数 | 涉及功能 |
|-------|---------|---------|
| `department` | 8 | 统计卡片、图表、所有列表页面 |
| `region` | 6 | 统计卡片、图表、筛选器 |
| `name` | 4 | 所有列表页面 |
| `work_age_months` | 4 | 统计卡片、工龄图表 |
| `education` | 4 | 统计卡片、学历图表 |
| `entry_date` | 4 | 统计卡片、筛选器、列表排序 |

### 7.2 中频使用字段

| 字段名 | 使用次数 | 涉及功能 |
|-------|---------|---------|
| `position` | 3 | 员工花名册、离职监控、搜索 |
| `gender` | 2 | 员工花名册、离职监控 |
| `age` | 2 | 员工花名册、离职监控 |
| `sequence_number` | 2 | 员工花名册、离职监控 |

### 7.3 专用字段

| 字段名 | 使用功能 | 说明 |
|-------|---------|-----|
| `resignation_date` | 离职监控 | 离职时间统计和显示 |
| `resignation_type` | 离职监控 | 离职类型分类 |
| `resignation_reason` | 离职监控 | 离职原因记录 |
| `original_position` | 人员异动 | 异动前岗位 |
| `new_position` | 人员异动 | 异动后岗位 |
| `transfer_date` | 人员异动 | 异动时间 |
| `change_reason` | 人员异动 | 异动原因 |
